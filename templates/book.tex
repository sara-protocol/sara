\documentclass[12pt]{book}
\usepackage{fontspec}
\usepackage{xeCJK}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{longtable}

\usepackage{fancyvrb}
\usepackage{framed}
\definecolor{shadecolor}{RGB}{245,245,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
\geometry{a5paper, margin=2cm}

% 字体（按环境修改）
% Windows: Microsoft YaHei / SimSun
% macOS: PingFang SC / Songti SC
% Linux: Noto Serif CJK SC / Noto Sans CJK SC
\setmainfont{Noto Serif CJK SC}
\setCJKmainfont{Noto Serif CJK SC}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[LO]{\nouppercase{\leftmark}}
\fancyhead[RE]{\nouppercase{\rightmark}}

\hypersetup{colorlinks=true, linkcolor=blue, urlcolor=blue}

\begin{document}

$if(title)$
\begin{titlepage}
\centering
{\Huge $title$\par}
\vspace{1cm}
$if(subtitle)$ {\Large $subtitle$\par}\vspace{1cm} $endif$
{\Large $author$\par}
\vfill
$if(date)$ {\large $date$\par} $endif$
\end{titlepage}
$endif$

$if(toc)$
\tableofcontents
$endif$

$body$

\end{document}
% --- Pandoc syntax highlighting (needed for FunctionTok etc.) ---
\usepackage{fancyvrb}
\usepackage{xcolor}
\usepackage{framed}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}

\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.82,0.01,0.11}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.44,0.63,0.82}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.38,0.38}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.38,0.38}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.44,0.63,0.82}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.82,0.01,0.11}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.44,0.63,0.82}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{#1}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.82,0.01,0.11}{#1}}
% --- end pandoc highlighting ---

